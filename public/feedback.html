<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>D√∂nerd ‚Äì Feedback</title>
  <style>
    :root{ --bg:#f0f0f0; --text:#111; --muted:#6b7280; --card:#ffffff; --ring:#e5e7eb; --chip:#eef0f3; --chipText:#0f172a; --accent:#fb923c; --accent-strong:#f97316; --shadow:0 8px 24px rgba(0,0,0,.18); --nav-pill-w:140px; }
    html, body { margin:0; height:100%; background:var(--bg); color:var(--text); font-family: Arial, sans-serif; }
    .navbar { position:sticky; top:0; z-index:10; background:transparent; display:flex; justify-content:center; padding:12px 16px; }
    .nav-inner { width:100%; max-width:1280px; display:flex; align-items:center; gap:12px; }
    .brand { display:flex; align-items:center; gap:8px; font-weight:800; font-size:20px; }
    .brand .dot { width:12px; height:12px; border-radius:50%; background:#ff385c; display:inline-block; }
    .right-actions { display:flex; align-items:center; gap:12px; margin-left:auto; }
    .action-pill { flex:0 0 var(--nav-pill-w); min-width:var(--nav-pill-w); display:flex; align-items:center; justify-content:center; gap:8px; padding:8px 14px; background:#fff; border-radius:999px; border:1px solid var(--ring); cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,.06); font-weight:700; white-space:nowrap; }
    .action-pill:hover{ background:#f9fafb; }
    .action-icon { width:18px; height:18px; display:inline-grid; place-items:center; border-radius:50%; background:#f3f4f6; font-size:12px; color:#374151; }
    .lang-toggle{ display:inline-flex; align-items:center; background:#fff; border:1px solid var(--ring); border-radius:999px; overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,.06); }
    .lang-toggle button{ min-width:60px; padding:8px 12px; font-weight:800; background:transparent; border:0; cursor:pointer; white-space:nowrap; }
    .lang-toggle button+button{ border-left:1px solid var(--ring); }
    .lang-toggle button.is-active{ background:var(--accent); color:#000; }
    .wrap { display:flex; justify-content:center; padding:20px; }
    .card { width:min(820px, 96vw); background:var(--card); border-radius:20px; box-shadow:var(--shadow); padding:22px 22px 26px; }
    .title { font-size:28px; font-weight:800; margin:0 0 8px; }
    .subtitle { color:var(--muted); margin:0 0 16px; }
    hr.sep { border:none; border-top:1px solid var(--ring); margin:14px 0 18px; }
    .section { margin-top:18px; }
    .section h4 { margin:0 0 10px; font-size:16px; }
    .chip-row { display:flex; flex-wrap:wrap; gap:10px; }
    .chip { display:inline-flex; align-items:center; gap:8px; padding:8px 14px; border-radius:999px; background:var(--chip); color:var(--chipText); border:1px solid var(--ring); cursor:pointer; user-select:none; }
    .chip input { display:none; }
    .chip.active { background:rgba(249,115,22,.16); border-color:rgba(249,115,22,.35); }
    .stars { display:flex; gap:8px; font-size:24px; cursor:pointer; }
    .stars button { background:#fff; border:1px solid var(--ring); border-radius:10px; padding:8px 10px; }
    .pill-row { display:flex; flex-wrap:wrap; gap:12px; }
    .pill { display:flex; align-items:center; gap:8px; background:var(--chip); border:1px solid var(--ring); border-radius:12px; padding:10px 14px; }
    .pill input[type="email"] { width:260px; max-width:60vw; border:0; outline:0; background:transparent; padding:4px 6px; font-size:14px; }
    textarea { width:100%; min-height:140px; border-radius:12px; border:1px solid var(--ring); padding:12px; resize:vertical; font-family:inherit; font-size:14px; }
    .actions { display:flex; gap:12px; justify-content:center; margin-top:22px; }
    .btn { display:inline-flex; align-items:center; justify-content:center; gap:8px; border:none; cursor:pointer; font-weight:800; }
    .btn-primary { width:100%; max-width:420px; border-radius:999px; padding:14px 18px; background:var(--accent); box-shadow:0 6px 16px rgba(249,115,22,.35); color:#000; }
    .btn-primary:hover{ background:var(--accent-strong); }
    .btn-secondary { padding:10px 14px; border-radius:999px; background:#fff; border:1px solid var(--ring); }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="nav-inner">
      <div class="brand"><span class="dot"></span><span>D√∂nerd</span></div>
      <div class="right-actions">
        <button class="action-pill" onclick="location.href='index.html'"><span class="action-icon">üó∫Ô∏è</span><span data-i18n="nav.map">Karte</span></button>
        <button class="action-pill" onclick="location.href='add-shop.html'"><span class="action-icon">‚ûï</span><span data-i18n="nav.add">Shop hinzuf√ºgen</span></button>
        <button class="action-pill" onclick="location.href='selection.html'"><span class="action-icon">üìã</span><span data-i18n="nav.selection">Preisliste</span></button>
        <button class="action-pill" onclick="location.href='about.html'"><span class="action-icon">üë§</span><span data-i18n="nav.about">√úber mich</span></button>
        <div class="lang-toggle" role="group" aria-label="Language">
          <button type="button" data-lang="de" aria-pressed="false">DE</button>
          <button type="button" data-lang="en" aria-pressed="false">EN</button>
        </div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <form id="fbForm" class="card" novalidate>
      <h1 class="title" data-i18n="fb.title">Feedback</h1>
      <p class="subtitle" data-i18n="fb.subtitle">Sag uns kurz, was gut war ‚Äì und was besser werden kann.</p>
      <hr class="sep" />

      <div class="section">
        <h4 data-i18n="fb.rating">Bewertung</h4>
        <div class="stars" id="stars">
          <button type="button" data-v="1">‚òÖ</button>
          <button type="button" data-v="2">‚òÖ</button>
          <button type="button" data-v="3">‚òÖ</button>
          <button type="button" data-v="4">‚òÖ</button>
          <button type="button" data-v="5">‚òÖ</button>
        </div>
        <input type="hidden" id="rating" name="rating" value="0" />
      </div>

      <div class="section">
        <h4 data-i18n="fb.category">Kategorie</h4>
        <div class="chip-row" id="cats">
          <label class="chip"><input type="checkbox" value="ui"><span data-i18n="fb.ui">UI/Design</span></label>
          <label class="chip"><input type="checkbox" value="data"><span data-i18n="fb.data">Daten</span></label>
          <label class="chip"><input type="checkbox" value="bug"><span data-i18n="fb.bug">Bug</span></label>
          <label class="chip"><input type="checkbox" value="feature"><span data-i18n="fb.feature">Feature-Idee</span></label>
        </div>
      </div>

      <div class="section">
        <h4 data-i18n="fb.message">Nachricht</h4>
        <textarea id="message" data-i18n-placeholder="fb.messagePh" placeholder="Erz√§hl uns mehr‚Ä¶"></textarea>
      </div>

      <div class="section">
        <h4 data-i18n="fb.contact">Kontakt (optional)</h4>
        <div class="pill-row">
          <div class="pill"><span>‚úâÔ∏è</span><input type="email" id="email" placeholder="E-Mail f√ºr R√ºckfragen" data-i18n-placeholder="fb.emailPh" /></div>
        </div>
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary" data-i18n="fb.send">Senden</button>
        <button class="btn btn-secondary" type="button" onclick="location.href='index.html'" data-i18n="fb.cancel">Abbrechen</button>
      </div>
    </form>
  </div>

  <script>
    const DICTS={de:{ nav:{map:"Karte", add:"Shop hinzuf√ºgen", selection:"Preisliste", about:"√úber mich"},
      fb:{title:"Feedback", subtitle:"Sag uns kurz, was gut war ‚Äì und was besser werden kann.", rating:"Bewertung", category:"Kategorie",
          ui:"UI/Design", data:"Daten", bug:"Bug", feature:"Feature-Idee",
          message:"Nachricht", messagePh:"Erz√§hl uns mehr‚Ä¶", contact:"Kontakt (optional)", emailPh:"E-Mail f√ºr R√ºckfragen",
          send:"Senden", cancel:"Abbrechen", thanks:"Danke f√ºr dein Feedback!"} },
      en:{ nav:{map:"Map", add:"Add Shop", selection:"Price list", about:"About me"},
      fb:{title:"Feedback", subtitle:"Tell us what worked well and what could be better.", rating:"Rating", category:"Category",
          ui:"UI/Design", data:"Data", bug:"Bug", feature:"Feature idea",
          message:"Message", messagePh:"Tell us more‚Ä¶", contact:"Contact (optional)", emailPh:"Email for follow-up",
          send:"Send", cancel:"Cancel", thanks:"Thanks for your feedback!"} }};
    const I18N=(()=>{let lang='de',dict=DICTS.de;const get=(o,p)=>p.split('.').reduce((a,k)=>a&&a[k]!=null?a[k]:undefined,o);const t=(k,fb)=>get(dict,k)??fb??k;
      function apply(){document.querySelectorAll('[data-i18n]').forEach(el=>el.textContent=t(el.dataset.i18n,el.textContent.trim()));
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el=>el.placeholder=t(el.dataset.i18nPlaceholder,el.placeholder));
        document.documentElement.lang=lang; document.querySelectorAll('.lang-toggle [data-lang]').forEach(b=>{const on=b.dataset.lang===lang; b.classList.toggle('is-active',on); b.setAttribute('aria-pressed',on?'true':'false');});}
      function set(l){lang=l;dict=DICTS[l]||DICTS.de;localStorage.setItem('lang',l);apply();}
      function init(){set(localStorage.getItem('lang')||(['de','en'].includes((navigator.language||'').slice(0,2))?(navigator.language||'').slice(0,2):'de')); document.addEventListener('click',e=>{const b=e.target.closest('.lang-toggle [data-lang]'); if(b) set(b.dataset.lang);});}
      return {init,t};})(); document.addEventListener('DOMContentLoaded', I18N.init);
  </script>

  <script>
    function refreshChips(){ document.querySelectorAll('.chip').forEach(lb=>{ const i=lb.querySelector('input'); if(!i) return; lb.classList.toggle('active', i.checked); }); }
    document.addEventListener('change', e=>{ if(e.target.matches('.chip input')) refreshChips(); });

    const stars=document.getElementById('stars'); const ratingEl=document.getElementById('rating');
    stars.addEventListener('click', e=>{ if(e.target.dataset.v){ ratingEl.value=e.target.dataset.v; [...stars.children].forEach((b,i)=> b.textContent = i < ratingEl.value ? '‚òÖ' : '‚òÜ'); }});
    document.getElementById('fbForm').addEventListener('submit', e=>{
      e.preventDefault();
      const data={ rating: parseInt(ratingEl.value||'0',10),
        categories: [...document.querySelectorAll('#cats input:checked')].map(i=>i.value),
        message: document.getElementById('message').value.trim(),
        email: document.getElementById('email').value.trim() || null,
        created_at: new Date().toISOString() };
      try{ const all=JSON.parse(localStorage.getItem('feedbacks')||'[]'); all.push(data); localStorage.setItem('feedbacks', JSON.stringify(all)); }catch(_){}
      alert(I18N.t('fb.thanks')); location.href='index.html';
    });
    refreshChips();
  </script>
</body>
</html>
